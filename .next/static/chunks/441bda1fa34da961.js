(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62613,e=>{"use strict";let t=()=>localStorage.getItem("authToken"),r=e=>{localStorage.setItem("authToken",e)},o=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user")},s=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},a=e=>{localStorage.setItem("user",JSON.stringify(e))};async function n(e,r={}){let o=t(),s={"Content-Type":"application/json",...r.headers};o&&(s.Authorization=`Bearer ${o}`);let a=`http://localhost:5085/api${e}`;try{let e=await fetch(a,{...r,headers:s});if(!e.ok){let t=await e.text(),r="Request failed";try{let e=JSON.parse(t);r=e.message||e.title||e.error||r}catch{r=t||r}throw Error(r)}return await e.json()}catch(e){throw console.error("API Error:",e),e}}let c={login:async(e,t)=>{let o=await n("/Auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return o.success&&o.token&&(r(o.token),a(o.user)),o},register:async e=>{let t=await n("/Auth/register",{method:"POST",body:JSON.stringify(e)});return t.success&&t.token&&(r(t.token),a(t.user)),t},logout:()=>{o()},isAuthenticated:()=>!!t(),getCurrentUser:()=>s(),googleLogin:async e=>{let t=await n("/Auth/google",{method:"POST",body:JSON.stringify({idToken:e})});return t.success&&t.token&&(r(t.token),a(t.user)),t}},l={getAll:()=>n("/Products"),getById:e=>n(`/Products/${e}`),getByMerchant:e=>n(`/Products/merchant/${e}`),search:e=>n(`/Products/search?q=${encodeURIComponent(e)}`),getByCategory:e=>n(`/Products/category/${encodeURIComponent(e)}`)},u={getAll:()=>n("/Merchants"),getById:e=>n(`/Merchants/${e}`),getProducts:e=>n(`/Merchants/${e}/products`),getNearby:e=>n(`/Merchants/nearby?city=${encodeURIComponent(e)}`)},g={getMyOrders:()=>n("/Orders"),getById:e=>n(`/Orders/${e}`),create:e=>n("/Orders",{method:"POST",body:JSON.stringify(e)})};e.s(["api",0,{auth:c,products:l,merchants:u,orders:g},"authAPI",0,c,"getToken",0,t,"getUser",0,s,"merchantsAPI",0,u,"ordersAPI",0,g,"productsAPI",0,l,"removeToken",0,o,"setToken",0,r,"setUser",0,a])}]);