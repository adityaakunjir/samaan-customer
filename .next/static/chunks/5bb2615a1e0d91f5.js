(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62613,e=>{"use strict";let r=()=>localStorage.getItem("authToken"),s=e=>{localStorage.setItem("authToken",e)},t=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user")},a=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},d=e=>{localStorage.setItem("user",JSON.stringify(e))};async function l(e,s={}){let t=r(),a={"Content-Type":"application/json",...s.headers};t&&(a.Authorization=`Bearer ${t}`);let d=`http://localhost:5085/api${e}`;try{let e=await fetch(d,{...s,headers:a});if(!e.ok){let r=await e.text(),s="Request failed";try{let e=JSON.parse(r);s=e.message||e.title||e.error||s}catch{s=r||s}throw Error(s)}return await e.json()}catch(e){throw console.error("API Error:",e),e}}let c={login:async(e,r)=>{let t=await l("/Auth/login",{method:"POST",body:JSON.stringify({email:e,password:r})});return t.success&&t.token&&(s(t.token),d(t.user)),t},register:async e=>{let r=await l("/Auth/register",{method:"POST",body:JSON.stringify(e)});return r.success&&r.token&&(s(r.token),d(r.user)),r},logout:()=>{t()},isAuthenticated:()=>!!r(),getCurrentUser:()=>a(),googleLogin:async e=>{let r=await l("/Auth/google",{method:"POST",body:JSON.stringify({idToken:e})});return r.success&&r.token&&(s(r.token),d(r.user)),r}},i={getAll:()=>l("/Products"),getById:e=>l(`/Products/${e}`),getByMerchant:e=>l(`/Products/merchant/${e}`),search:e=>l(`/Products/search?q=${encodeURIComponent(e)}`),getByCategory:e=>l(`/Products/category/${encodeURIComponent(e)}`)},o={getAll:()=>l("/Merchants"),getById:e=>l(`/Merchants/${e}`),getProducts:e=>l(`/Merchants/${e}/products`),getNearby:e=>l(`/Merchants/nearby?city=${encodeURIComponent(e)}`)},n={getMyOrders:()=>l("/Orders"),getById:e=>l(`/Orders/${e}`),create:e=>l("/Orders",{method:"POST",body:JSON.stringify(e)})};e.s(["api",0,{auth:c,products:i,merchants:o,orders:n},"authAPI",0,c,"getToken",0,r,"getUser",0,a,"merchantsAPI",0,o,"ordersAPI",0,n,"productsAPI",0,i,"removeToken",0,t,"setToken",0,s,"setUser",0,d])},58471,e=>{"use strict";let r=(0,e.i(66564).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>r],58471)},87142,e=>{"use strict";let r=(0,e.i(66564).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>r],87142)},26294,e=>{"use strict";let r=(0,e.i(66564).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>r],26294)},52212,e=>{"use strict";let r=(0,e.i(66564).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],52212)},31166,e=>{"use strict";let r=(0,e.i(66564).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>r],31166)},66688,(e,r,s)=>{r.exports=e.r(13941)},73477,e=>{"use strict";let r=(0,e.i(66564).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],73477)},77261,e=>{"use strict";let r=(0,e.i(66564).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>r],77261)},45851,e=>{"use strict";var r=e.i(2153),s=e.i(51828),t=e.i(88222),a=e.i(90316),d=e.i(66688),l=e.i(73419),c=e.i(52212),i=e.i(26294),o=e.i(58471);let n=(0,e.i(66564).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);var u=e.i(73477),m=e.i(87142),h=e.i(77261),x=e.i(31166),p=e.i(26211),g=e.i(62613);function y({params:e}){let{id:y}=(0,s.use)(e),f=(0,d.useRouter)(),[b,j]=(0,s.useState)(null),[v,N]=(0,s.useState)(!0),[k,w]=(0,s.useState)(null);(0,s.useEffect)(()=>{g.authAPI.isAuthenticated()?A():f.push("/login?redirect=/orders")},[y,f]);let A=async()=>{try{N(!0),w(null);let e=await g.api.orders.getById(y);j(e)}catch(e){console.error("Failed to load order:",e),w(e.message||"Failed to load order details")}finally{N(!1)}},P=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):null;if(v)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background flex items-center justify-center",children:(0,r.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-primary"})});if(k||!b)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background",children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-xl border-b border-border/50 shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center gap-4",children:[(0,r.jsx)(t.default,{href:"/orders",className:"p-2 hover:bg-muted rounded-xl transition-colors",children:(0,r.jsx)(l.ArrowLeft,{className:"w-5 h-5"})}),(0,r.jsx)("h1",{className:"text-lg font-bold",children:"Order Details"})]})}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,r.jsx)("p",{className:"text-red-500 mb-4",children:k||"Order not found"}),(0,r.jsx)(p.Button,{onClick:()=>f.push("/orders"),children:"Back to Orders"})]})]});let O=(()=>{if(!b)return[];let e=[{status:"Order Placed",time:P(b.createdAt),completed:!0}];return b.confirmedAt&&e.push({status:"Confirmed",time:P(b.confirmedAt),completed:!0}),b.preparingAt&&e.push({status:"Preparing",time:P(b.preparingAt),completed:!0}),b.readyAt&&e.push({status:"Out for Delivery",time:P(b.readyAt),completed:!0}),b.deliveredAt&&e.push({status:"Delivered",time:P(b.deliveredAt),completed:!0}),e})();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background",children:[(0,r.jsx)("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-xl border-b border-border/50 shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center gap-4",children:[(0,r.jsx)(t.default,{href:"/orders",className:"p-2 hover:bg-muted rounded-xl transition-colors",children:(0,r.jsx)(l.ArrowLeft,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-bold",children:"Order Details"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:b.orderNumber||b.id})]})]})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[(0,r.jsxs)("div",{className:`${(e=>{switch(e.toLowerCase()){case"delivered":return"bg-green-50 border-green-200";case"ready":case"out-for-delivery":return"bg-blue-50 border-blue-200";case"preparing":case"packed":return"bg-yellow-50 border-yellow-200";default:return"bg-muted border-border"}})(b.status)} border rounded-2xl p-4 sm:p-6`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"p-2 bg-current/10 rounded-xl",children:(e=>{switch(e.toLowerCase()){case"delivered":return(0,r.jsx)(c.CheckCircle2,{className:"w-6 h-6 text-green-600"});case"ready":case"out-for-delivery":return(0,r.jsx)(x.Truck,{className:"w-6 h-6 text-blue-600"});case"preparing":case"packed":return(0,r.jsx)(m.Clock,{className:"w-6 h-6 text-yellow-600"});default:return(0,r.jsx)(h.Package,{className:"w-6 h-6 text-muted-foreground"})}})(b.status)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-bold",children:(e=>{switch(e.toLowerCase()){case"delivered":return"Order Delivered";case"ready":return"Ready for Delivery";case"out-for-delivery":return"Out for Delivery";case"packed":return"Order Packed";case"preparing":return"Preparing Order";case"confirmed":return"Order Confirmed";case"new":return"Order Placed";default:return e}})(b.status)}),(0,r.jsx)("p",{className:"text-sm opacity-80",children:"delivered"===b.status.toLowerCase()&&b.deliveredAt?`Delivered at ${P(b.deliveredAt)}`:`Order placed at ${P(b.createdAt)}`})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:O.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:`w-3 h-3 rounded-full ${e.completed?"bg-green-500":"bg-gray-300"}`}),(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-between",children:[(0,r.jsx)("span",{className:`text-sm ${e.completed?"text-foreground":"text-gray-500"}`,children:e.status}),(0,r.jsx)("span",{className:"text-xs opacity-70",children:e.time})]})]},s))})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border/50 shadow-sm overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b border-border/50",children:(0,r.jsx)("h3",{className:"font-semibold",children:"Order Items"})}),(0,r.jsx)("div",{className:"divide-y divide-border/50",children:b.items.map((e,s)=>(0,r.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-muted/30 rounded-xl overflow-hidden flex-shrink-0",children:(0,r.jsx)(a.default,{src:"/placeholder.svg",alt:e.productName,width:64,height:64,className:"w-full h-full object-contain"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"font-medium text-sm truncate",children:e.productName}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.quantity," x ₹",e.unitPrice]})]}),(0,r.jsxs)("p",{className:"font-semibold text-sm",children:["₹",e.totalPrice]})]},s))})]}),(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border/50 shadow-sm p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-4",children:"Bill Details"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Item Total"}),(0,r.jsxs)("span",{children:["₹",b.itemsTotal]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Delivery Fee"}),(0,r.jsxs)("span",{children:["₹",b.deliveryFee]})]}),b.discount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,r.jsx)("span",{children:"Discount"}),(0,r.jsxs)("span",{children:["-₹",b.discount]})]}),(0,r.jsxs)("div",{className:"border-t border-border/50 pt-3 flex justify-between font-bold",children:[(0,r.jsx)("span",{children:"Total Paid"}),(0,r.jsxs)("span",{children:["₹",b.grandTotal]})]})]})]}),b.deliveryAddress&&(0,r.jsxs)("div",{className:"bg-card rounded-2xl border border-border/50 shadow-sm p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Delivery Address"}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,r.jsx)(i.MapPin,{className:"w-4 h-4 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:b.deliveryAddress}),b.deliveryInstructions&&(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Note: ",b.deliveryInstructions]})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(p.Button,{variant:"outline",className:"flex-1 rounded-xl gap-2 bg-transparent",children:[(0,r.jsx)(o.Phone,{className:"w-4 h-4"}),"Call Support"]}),(0,r.jsxs)(p.Button,{variant:"outline",className:"flex-1 rounded-xl gap-2 bg-transparent",children:[(0,r.jsx)(n,{className:"w-4 h-4"}),"Chat with Us"]})]})]})]})}e.s(["default",()=>y],45851)}]);