(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58471,e=>{"use strict";let t=(0,e.i(66564).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],58471)},26294,e=>{"use strict";let t=(0,e.i(66564).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],26294)},62613,e=>{"use strict";let t=()=>localStorage.getItem("authToken"),s=e=>{localStorage.setItem("authToken",e)},r=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user")},a=()=>{let e=localStorage.getItem("user");return e?JSON.parse(e):null},l=e=>{localStorage.setItem("user",JSON.stringify(e))};async function o(e,s={}){let r=t(),a={"Content-Type":"application/json",...s.headers};r&&(a.Authorization=`Bearer ${r}`);let l=`http://localhost:5085/api${e}`;try{let e=await fetch(l,{...s,headers:a});if(!e.ok){let t=await e.text(),s="Request failed";try{let e=JSON.parse(t);s=e.message||e.title||e.error||s}catch{s=t||s}throw Error(s)}return await e.json()}catch(e){throw console.error("API Error:",e),e}}let i={login:async(e,t)=>{let r=await o("/Auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return r.success&&r.token&&(s(r.token),l(r.user)),r},register:async e=>{let t=await o("/Auth/register",{method:"POST",body:JSON.stringify(e)});return t.success&&t.token&&(s(t.token),l(t.user)),t},logout:()=>{r()},isAuthenticated:()=>!!t(),getCurrentUser:()=>a(),googleLogin:async e=>{let t=await o("/Auth/google",{method:"POST",body:JSON.stringify({idToken:e})});return t.success&&t.token&&(s(t.token),l(t.user)),t}},c={getAll:()=>o("/Products"),getById:e=>o(`/Products/${e}`),getByMerchant:e=>o(`/Products/merchant/${e}`),search:e=>o(`/Products/search?q=${encodeURIComponent(e)}`),getByCategory:e=>o(`/Products/category/${encodeURIComponent(e)}`)},n={getAll:()=>o("/Merchants"),getById:e=>o(`/Merchants/${e}`),getProducts:e=>o(`/Merchants/${e}/products`),getNearby:e=>o(`/Merchants/nearby?city=${encodeURIComponent(e)}`)},d={getMyOrders:()=>o("/Orders"),getById:e=>o(`/Orders/${e}`),create:e=>o("/Orders",{method:"POST",body:JSON.stringify(e)})};e.s(["api",0,{auth:i,products:c,merchants:n,orders:d},"authAPI",0,i,"getToken",0,t,"getUser",0,a,"merchantsAPI",0,n,"ordersAPI",0,d,"productsAPI",0,c,"removeToken",0,r,"setToken",0,s,"setUser",0,l])},87142,e=>{"use strict";let t=(0,e.i(66564).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],87142)},73477,e=>{"use strict";let t=(0,e.i(66564).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],73477)},76963,e=>{"use strict";var t=e.i(2153),s=e.i(66688),r=e.i(51828),a=e.i(88222),l=e.i(90316),o=e.i(73419),i=e.i(5827),c=e.i(87142),n=e.i(26294),d=e.i(10967),h=e.i(58471),m=e.i(31302),u=e.i(52484),x=e.i(73477),g=e.i(26211),p=e.i(7323),f=e.i(29672),j=e.i(62613);function y({id:e}){let y=(0,s.useSearchParams)().get("product"),[b,N]=(0,r.useState)(null),[v,k]=(0,r.useState)([]),[w,P]=(0,r.useState)(!0),[S,I]=(0,r.useState)(null),[A,C]=(0,r.useState)(!1),O=(0,r.useRef)({});return((0,r.useEffect)(()=>{(async()=>{P(!0),I(null);try{let[t,s]=await Promise.all([j.merchantsAPI.getById(e),j.merchantsAPI.getProducts(e)]);N(t),k(s||[])}catch(e){console.error("Error fetching shop data:",e),I("Failed to load shop details")}finally{P(!1)}})()},[e]),(0,r.useEffect)(()=>{!w&&y&&O.current[y]&&setTimeout(()=>{O.current[y]?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[w,y,v]),w)?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(x.Loader2,{className:"w-8 h-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading shop..."})]})}):S||!b?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-destructive mb-4",children:S||"Shop not found"}),(0,t.jsx)(a.default,{href:"/shops",children:(0,t.jsx)(g.Button,{variant:"outline",children:"Back to Shops"})})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background pb-32",children:[(0,t.jsx)("header",{className:"sticky top-0 z-50 bg-background/80 backdrop-blur-xl border-b border-border/50 shadow-sm",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(a.default,{href:"/shops",className:"p-2 hover:bg-muted rounded-xl transition-colors",children:(0,t.jsx)(o.ArrowLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold",children:b.businessName}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[v.length," products"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>C(!A),className:"p-2 hover:bg-muted rounded-xl transition-colors",children:(0,t.jsx)(u.Heart,{className:`w-5 h-5 ${A?"fill-red-500 text-red-500":""}`})}),(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-xl transition-colors",children:(0,t.jsx)(m.Share2,{className:"w-5 h-5"})})]})]})}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-card rounded-2xl border border-border/50 shadow-sm p-4",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-muted/50 rounded-xl overflow-hidden flex-shrink-0",children:(0,t.jsx)(l.default,{src:b.logoUrl||"/placeholder-logo.png",alt:b.businessName||"Shop logo",width:80,height:80,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"font-bold text-lg",children:b.businessName}),b.isVerified&&(0,t.jsx)(d.BadgeCheck,{className:"w-5 h-5 text-blue-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground flex-wrap",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.Star,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),b.rating||4," (50)"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(n.MapPin,{className:"w-4 h-4"}),"1 km"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Clock,{className:"w-4 h-4"}),"15 mins"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Address"}),(0,t.jsx)("p",{className:"text-sm",children:b.address||b.city||"Pune, Maharashtra"})]}),b.phone&&(0,t.jsx)("a",{href:`tel:${b.phone}`,children:(0,t.jsxs)(g.Button,{variant:"outline",size:"sm",className:"rounded-full gap-2 bg-transparent",children:[(0,t.jsx)(h.Phone,{className:"w-4 h-4"}),"Call"]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Products"}),0===v.length?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:(0,t.jsx)("p",{children:"No products available yet"})}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map((e,s)=>{let r=y===e.id;return(0,t.jsx)("div",{ref:t=>{O.current[e.id]=t},style:{animationDelay:`${50*s}ms`},className:`animate-in fade-in slide-in-from-bottom-4 duration-500 transition-all ${r?"ring-2 ring-primary ring-offset-2 rounded-2xl scale-105 shadow-lg":""}`,children:(0,t.jsx)(p.ProductCard,{product:{id:parseInt(e.id),name:e.name,quantity:e.quantity||"1 unit",price:e.price,image:e.imageUrl||"/generic-food-product.png",freshnessScore:e.freshnessScore||95,stockedTime:"20m ago",deliveryEta:"15 mins"},variant:"compact"})},e.id)})})]})]}),(0,t.jsx)(f.CartFooter,{})]})}function b(){let e=(0,s.useParams)().id;return(0,t.jsx)(y,{id:e})}e.s(["default",()=>b],76963)}]);